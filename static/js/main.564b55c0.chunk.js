(this["webpackJsonpmovie-card"]=this["webpackJsonpmovie-card"]||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=n(21),a=n.n(r),c=(n(119),n(120),n(72)),s=n(20),l=n(59),d=n(29),u=n.n(d),v=n(37),m=n(26),j=n.n(m),b=n(73),p=n(74),f=n.n(p),O=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://yts.mx/api/v2/movie_details.json?movie_id=".concat(t),e.next=3,f.a.get(n);case 3:return i=e.sent,e.abrupt("return",i.data.data.movie);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://yts-proxy.now.sh/list_movies.json?limit=24&&sort_by=download_count&page=".concat(t),e.next=3,f.a.get(n);case 3:return i=e.sent,e.abrupt("return",i.data.data.movies);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=n(177),x=n(178),_=n(173),w=n(6),N=Object(_.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function P(e){var t=e.loading,n=N();return Object(w.jsx)(h.a,{className:n.backdrop,open:t,children:Object(w.jsx)(x.a,{color:"inherit"})})}var y=function(e){var t=e.id,n=Object(i.useState)(1),o=Object(l.a)(n,2),r=o[0],a=o[1],c=Object(i.useState)(!1),s=Object(l.a)(c,2),d=s[0],m=s[1],j=Object(v.useQuery)(["movie",t],(function(){return O(t)})),b=j.isLoading,p=j.data,f=j.error,g=p,h=function(){var e=window.scrollY;a(e)};return Object(i.useEffect)((function(){return window.scrollTo(0,0),window.addEventListener("scroll",h),function(){return window.removeEventListener("scroll",h)}}),[]),b?Object(w.jsx)(P,{loading:b}):f?Object(w.jsx)(w.Fragment,{children:"An error has occurred"}):Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:u.a.container,children:Object(w.jsxs)("div",{className:u.a.content,children:[Object(w.jsx)("div",{className:u.a["movie-poster"],children:Object(w.jsx)("img",{src:null===g||void 0===g?void 0:g.large_cover_image,alt:null===g||void 0===g?void 0:g.title})}),Object(w.jsx)("div",{className:u.a["mobile-wrap"],children:Object(w.jsx)("div",{className:u.a["mobile-movie-poster"],style:{backgroundImage:"url(".concat(null===g||void 0===g?void 0:g.large_cover_image,")"),transform:"translate3d(0%,".concat(r/100,"% ,0) scale(").concat(100+r/2/10,"%)"),filter:"blur(".concat(r/100,"px)")}})}),Object(w.jsxs)("div",{className:u.a["movie-content"],children:[Object(w.jsx)("div",{className:u.a["movie-title"],onClick:function(){return m(!d)},children:null===g||void 0===g?void 0:g.title_long}),Object(w.jsxs)("div",{className:u.a["movie-descript"],children:[null===g||void 0===g?void 0:g.description_full,null===g||void 0===g?void 0:g.description_full,null===g||void 0===g?void 0:g.description_full]})]})]})})})};var E=function(e){var t=e.match.params.id;return Object(w.jsx)(y,{id:t})},C=n(106),L=n(43),k=n.n(L),M=n(176);new(n(104).a)({defaultWidth:50,fixedWidth:!0});function S(e){var t=e.movie,n=e.onLoad,i=Object(s.f)(),o=t.id,r=t.medium_cover_image,a=t.title,c=(t.rating,t.description_full);return Object(w.jsx)(M.a,{className:k.a["movie-item"],onClick:function(){i.push("/detail/".concat(o))},children:Object(w.jsxs)("div",{className:k.a["movie-block"],children:[Object(w.jsx)("div",{className:k.a["movie-poster"],children:Object(w.jsx)("img",{src:r,alt:a,onLoad:n})}),Object(w.jsx)("div",{className:k.a["movie-title"],children:a}),Object(w.jsx)("div",{className:k.a["movie-description"],children:c})]})})}function F(e){var t=e.movies.map((function(e){return Object(w.jsx)(S,{movie:e},e.id)}));return Object(w.jsx)("div",{className:k.a["movie-list"],children:t})}var I=o.a.memo(F),A=null;var T=function(){var e=Object(i.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1],r=Object(i.useCallback)((function(){var e=document.documentElement.scrollHeight,t=document.documentElement.scrollTop,n=document.documentElement.clientHeight;o(t+n>=e)}),[]),a=Object(i.useCallback)((function(){A||(A=setTimeout((function(){r(),A=null}),300))}),[r]);return Object(i.useEffect)((function(){return window.addEventListener("scroll",a),function(){window.removeEventListener("scroll",a)}}),[a]),{scrollEnd:n,setScrollEnd:o,handleScroll:r}};var Q=function(){var e=Object(v.useInfiniteQuery)("movies",(function(e){var t=e.pageParam;return g(void 0===t?1:t)}),{getNextPageParam:function(e,t){return t.length+1}}),t=e.isLoading,n=e.error,o=e.data,r=e.fetchNextPage,a=(e.fetchPreviousPage,e.hasNextPage),c=(e.hasPreviousPage,e.isFetchingNextPage),s=(e.isFetchingPreviousPage,Object(C.a)(e,["isLoading","error","data","fetchNextPage","fetchPreviousPage","hasNextPage","hasPreviousPage","isFetchingNextPage","isFetchingPreviousPage"]),T().scrollEnd);return Object(i.useEffect)((function(){s&&r()}),[s]),t?Object(w.jsx)(P,{loading:t}):n?Object(w.jsx)(w.Fragment,{children:"An error has occurred"}):Object(w.jsxs)("div",{className:u.a.container,children:[null===o||void 0===o?void 0:o.pages.map((function(e,t){return Object(w.jsx)(I,{movies:e},t)})),Object(w.jsx)("div",{className:u.a.loading,children:c?"Loading more...":a?"Load More":"Nothing more to load"})]})};var R=function(){return Object(w.jsx)(Q,{})},B=n(103),z=new v.QueryClient;var D,G=function(){return Object(w.jsx)(v.QueryClientProvider,{client:z,children:Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(c.a,{basename:"/movie-card",children:[Object(w.jsxs)(s.c,{children:[Object(w.jsx)(s.a,{exact:!0,path:"/",component:R}),Object(w.jsx)(s.a,{path:"/detail/:id?",component:E})]}),Object(w.jsx)(B.ReactQueryDevtools,{initialIsOpen:!1})]})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,180)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),o(e),r(e),a(e)}))},V=n(46),Y=n(68),J=n(24),U=n(49),W=n(44),Z=n(60),q=n(50),K=j.a.mark(ne),X=j.a.mark(ie),$="movies/GET_MOVIES",ee="moives/GET_MOIVES_SUCCESS",te="movies/GET_MOVIES_ERROR";Object(Z.createAction)($)(),Object(Z.createAction)(ee)(),Object(Z.createAction)(te)();function ne(e){var t,n,i;return j.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,n=e.payload.page,o.next=4,g(n);case 4:if(!(null===(i=o.sent)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.data)){o.next=8;break}return o.next=8,Object(q.b)({type:ee,payload:i.data.data.movies});case 8:o.next=14;break;case 10:return o.prev=10,o.t0=o.catch(0),o.next=14,Object(q.b)({type:te,payload:o.t0});case 14:case"end":return o.stop()}}),K,null,[[0,10]])}function ie(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.c)($,ne);case 2:case"end":return e.stop()}}),X)}var oe=Object(Z.createReducer)({movies:[],loading:!1,error:!1,page:1},(D={},Object(U.a)(D,$,(function(e,t){return Object(W.a)(Object(W.a)({},e),{},{loading:!0,error:!1})})),Object(U.a)(D,ee,(function(e,t){return Object(W.a)(Object(W.a)({},e),{},{movies:e.movies.concat(t.payload),loading:!1,error:!1,page:e.page+1})})),Object(U.a)(D,te,(function(e,t){return Object(W.a)(Object(W.a)({},e),{},{movies:[],loading:!1,error:!1})})),D)),re=Object(V.b)({name:"loading",initialState:{loading:!1,success:!1,error:!1},reducers:{loading:function(e,t){e.loading=t.payload}}}),ae=(re.actions.loading,re.reducer),ce=Object(V.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),se=ce.actions,le=(se.increment,se.decrement,se.incrementByAmount,ce.reducer),de=j.a.mark(ue);function ue(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.a)([ie()]);case 2:case"end":return e.stop()}}),de)}var ve=Object(J.b)({movie:oe,loading:ae,counter:le}),me=(Y.b,n(105)),je=Object(me.a)(),be=Object(V.a)({reducer:ve,middleware:[je],devTools:!1});je.run(ue),a.a.render(Object(w.jsx)(Y.a,{store:be,children:Object(w.jsx)(G,{})}),document.getElementById("root")),H()},29:function(e,t,n){e.exports={content:"MovieContainer_content__snO3N","movie-poster":"MovieContainer_movie-poster__3IPA3","mobile-wrap":"MovieContainer_mobile-wrap__2LIsa","mobile-movie-poster":"MovieContainer_mobile-movie-poster__2su2P","movie-content":"MovieContainer_movie-content__3o2Ag","movie-title":"MovieContainer_movie-title__1hyow",container:"MovieContainer_container__2iYp3",loading:"MovieContainer_loading__Z19bv","movie-descript":"MovieContainer_movie-descript__1hzQS"}},43:function(e,t,n){e.exports={"movie-list":"MovieList_movie-list__3Sg-Y","movie-item":"MovieList_movie-item__3HnOo","movie-block":"MovieList_movie-block__2brfd","movie-title":"MovieList_movie-title__2f0hr","movie-description":"MovieList_movie-description__3UDlF","movie-poster":"MovieList_movie-poster__3bc5t"}}},[[154,1,2]]]);
//# sourceMappingURL=main.564b55c0.chunk.js.map