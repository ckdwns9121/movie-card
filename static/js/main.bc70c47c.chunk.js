(this["webpackJsonpmovie-card"]=this["webpackJsonpmovie-card"]||[]).push([[0],{121:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),i=n(19),r=n.n(i),a=(n(86),n(87),n(57)),s=n(17),l=n(21),u=n.n(l),d=n(46),v=n(34),m=n(22),j=n(39),b=Object(j.b)({name:"loading",initialState:{loading:!1,success:!1,error:!1},reducers:{loading:function(e,t){e.loading=t.payload}}}),f=b.actions.loading,p=b.reducer,O=function(){var e=Object(m.c)((function(e){return e.loading})).loading,t=Object(m.b)();return{loading:e,handleLoading:function(e){t(f(e))}}},_=n(28),g=n.n(_),x=n(41),h=n.n(x),w=(function(){var e=h.a.create({baseURL:"https://yts.mx",timeout:5e3}),t=function(t){return new Promise((function(n){setTimeout((function(){console.log("retry"),n(e.request(t))}),5e3)}))};e.interceptors.request.use((function(e){return console.log("\uc694\uccad \uc804"),e}),(function(e){return console.log("\uc624\ub958 \uc694\uccad \uc804 \uc218\ud589\ud560 \uc77c"),console.log(e),Promise.reject(e)})),e.interceptors.response.use((function(e){return e}),(function(e){return e.config?(console.log(e),t(e.config)):Promise.reject(e)}))}(),function(){var e=Object(d.a)(u.a.mark((function e(t,n){var o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="https://yts.mx/api/v2/movie_details.json?movie_id=".concat(t),e.next=3,h.a.get(o,{cancelToken:n.token});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://yts-proxy.now.sh/list_movies.json?limit=24&&sort_by=download_count&page=".concat(t),e.next=3,h.a.get(n);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=n(6);var y=function(e){var t=e.id,n=Object(o.useState)(),c=Object(v.a)(n,2),i=c[0],r=c[1],a=O().handleLoading,s=Object(o.useRef)(null),l=Object(o.useState)(""),m=Object(v.a)(l,2),j=(m[0],m[1],Object(o.useState)(1)),b=Object(v.a)(j,2),f=b[0],p=b[1],_=Object(o.useState)(!1),x=Object(v.a)(_,2),h=x[0],E=x[1],y=function(){var e=Object(d.a)(u.a.mark((function e(){var n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,w(t,s);case 4:o=e.sent,console.log(o),"ok"===(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.status)&&r(o.data.data.movie),a(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),a(!1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=window.scrollY;p(e)};return Object(o.useEffect)((function(){return window.addEventListener("scroll",L),function(){return window.removeEventListener("scroll",L)}}),[]),Object(o.useEffect)((function(){window.scrollTo(0,0),y()}),[]),Object(o.useEffect)((function(){console.log(h)}),[h]),Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{className:g.a.container,children:Object(k.jsxs)("div",{className:g.a.content,children:[Object(k.jsx)("div",{className:g.a["movie-poster"],children:Object(k.jsx)("img",{src:null===i||void 0===i?void 0:i.large_cover_image,alt:null===i||void 0===i?void 0:i.title})}),Object(k.jsx)("div",{className:g.a["mobile-wrap"],children:Object(k.jsx)("div",{className:g.a["mobile-movie-poster"],style:{backgroundImage:"url(".concat(null===i||void 0===i?void 0:i.large_cover_image,")"),transform:"translate3d(0%,".concat(f/100,"% ,0) scale(").concat(100+f/2/10,"%)"),filter:"blur(".concat(f/100,"px)")}})}),Object(k.jsxs)("div",{className:g.a["movie-content"],children:[Object(k.jsx)("div",{className:g.a["movie-title"],onClick:function(){return E(!h)},children:null===i||void 0===i?void 0:i.title_long}),Object(k.jsxs)("div",{className:g.a["movie-descript"],children:[null===i||void 0===i?void 0:i.description_full,null===i||void 0===i?void 0:i.description_full,null===i||void 0===i?void 0:i.description_full]})]})]})})})};var L=function(e){var t=e.match.params.id;return Object(k.jsx)(y,{id:t})},M=n(36),N=n.n(M),S=n(141);new(n(78).a)({defaultWidth:50,fixedWidth:!0});function C(e){var t=e.movie,n=e.onLoad,o=Object(s.f)(),c=t.id,i=t.medium_cover_image,r=t.title,a=(t.rating,t.description_full);return Object(k.jsx)(S.a,{className:N.a["movie-item"],onClick:function(){o.push("/detail/".concat(c))},children:Object(k.jsxs)("div",{className:N.a["movie-block"],children:[Object(k.jsx)("div",{className:N.a["movie-poster"],children:Object(k.jsx)("img",{src:i,alt:r,onLoad:n})}),Object(k.jsx)("div",{className:N.a["movie-title"],children:r}),Object(k.jsx)("div",{className:N.a["movie-description"],children:a})]})})}function I(e){var t=e.movies.map((function(e){return Object(k.jsx)(C,{movie:e},e.id)}));return Object(k.jsx)("div",{className:N.a["movie-list"],children:t})}var T=c.a.memo(I);var A,P=function(){var e=Object(o.useState)(!1),t=Object(v.a)(e,2),n=t[0],c=t[1],i=Object(m.c)((function(e){return e.movie})).loading,r=function(){var e=document.documentElement.scrollHeight,t=document.documentElement.scrollTop,n=document.documentElement.clientHeight;c(t+n>=e&&!i)};return Object(o.useEffect)((function(){return window.addEventListener("scroll",r),function(){window.removeEventListener("scroll",r)}})),{scrollEnd:n,setScrollEnd:c,handleScroll:r}},R=n(43),F=n(37),B=n(50),q=n(44),z=u.a.mark(D),G=u.a.mark(J),H="movies/GET_MOVIES",U="moives/GET_MOIVES_SUCCESS",V="movies/GET_MOVIES_ERROR",Y=Object(B.createAction)(H)();Object(B.createAction)(U)(),Object(B.createAction)(V)();function D(e){var t,n,o;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,n=e.payload.page,c.next=4,E(n);case 4:if(o=c.sent,console.log(o),!(null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.data)){c.next=9;break}return c.next=9,Object(q.b)({type:U,payload:o.data.data.movies});case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(0),c.next=15,Object(q.b)({type:V,payload:c.t0});case 15:case"end":return c.stop()}}),z,null,[[0,11]])}function J(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.c)(H,D);case 2:case"end":return e.stop()}}),G)}var Q=Object(B.createReducer)({movies:[],loading:!1,error:!1,page:1},(A={},Object(R.a)(A,H,(function(e,t){return Object(F.a)(Object(F.a)({},e),{},{loading:!0,error:!1})})),Object(R.a)(A,U,(function(e,t){return Object(F.a)(Object(F.a)({},e),{},{movies:e.movies.concat(t.payload),loading:!1,error:!1,page:e.page+1})})),Object(R.a)(A,V,(function(e,t){return Object(F.a)(Object(F.a)({},e),{},{movies:[],loading:!1,error:!1})})),A));var W=function(){var e=Object(m.c)((function(e){return e.movie})),t=e.movies,n=e.loading,c=e.page,i=Object(m.b)(),r=P().scrollEnd,a=O().handleLoading;return Object(o.useEffect)((function(){console.log(r),r&&i(Y({page:c}))}),[r]),Object(o.useEffect)((function(){a(n)}),[n]),Object(k.jsx)("div",{className:g.a.container,children:0!==t.length&&Object(k.jsx)(T,{movies:t})})};var K=function(){return Object(k.jsx)(W,{})},X=n(142),Z=n(143),$=n(140),ee=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function te(){var e=ee(),t=O().loading;return Object(k.jsx)(X.a,{className:e.backdrop,open:t,children:Object(k.jsx)(Z.a,{color:"inherit"})})}var ne=function(){var e=Object(m.b)();return Object(o.useEffect)((function(){e(Y({page:1}))}),[]),Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(a.a,{children:Object(k.jsxs)(s.c,{children:[Object(k.jsx)(s.a,{path:"/",component:K,exact:!0}),Object(k.jsx)(s.a,{path:"/detail/:id?",component:L})]})}),Object(k.jsx)(te,{})]})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),c(e),i(e),r(e)}))},ce=n(23),ie=Object(j.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),re=ie.actions,ae=(re.increment,re.decrement,re.incrementByAmount,ie.reducer),se=u.a.mark(le);function le(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.a)([J()]);case 2:case"end":return e.stop()}}),se)}var ue=Object(ce.b)({movie:Q,loading:p,counter:ae}),de=(m.c,n(79)),ve=Object(de.a)(),me=Object(j.a)({reducer:ue,middleware:[ve],devTools:!1});ve.run(le),r.a.render(Object(k.jsx)(m.a,{store:me,children:Object(k.jsx)(ne,{})}),document.getElementById("root")),oe()},28:function(e,t,n){e.exports={content:"MovieContainer_content__snO3N","movie-poster":"MovieContainer_movie-poster__3IPA3","mobile-wrap":"MovieContainer_mobile-wrap__2LIsa","mobile-movie-poster":"MovieContainer_mobile-movie-poster__2su2P","movie-content":"MovieContainer_movie-content__3o2Ag","movie-title":"MovieContainer_movie-title__1hyow",container:"MovieContainer_container__2iYp3","movie-descript":"MovieContainer_movie-descript__1hzQS",test:"MovieContainer_test__RNK6q",filter:"MovieContainer_filter__2QIr2"}},36:function(e,t,n){e.exports={"movie-list":"MovieList_movie-list__3Sg-Y","movie-item":"MovieList_movie-item__3HnOo","movie-block":"MovieList_movie-block__2brfd","movie-title":"MovieList_movie-title__2f0hr","movie-description":"MovieList_movie-description__3UDlF","movie-poster":"MovieList_movie-poster__3bc5t"}},86:function(e,t,n){},87:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.bc70c47c.chunk.js.map